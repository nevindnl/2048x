{"version":3,"sources":["webpack:///webpack/bootstrap fdf60bfb354c06d23e8f","webpack:///./lib/index.js","webpack:///./lib/game.js","webpack:///./lib/cell.js","webpack:///./lib/board.js","webpack:///./lib/util.js"],"names":["document","addEventListener","canvas","getElementsByTagName","ctx","getContext","game","start","Game","base","size","minDim","maxDim","highProb","board","dim","Math","min","cellDim","draw","installHandlers","getElementsByClassName","style","width","height","gridCellBorder","gridCellDim","i","pow","div","createElement","appendChild","drawBoard","clearRect","e","key","tilt","j","updatePositions","addRandom","COLORS","Cell","n","prevI","prevJ","merged","undefined","font","textAlign","textBaseline","x","y","fillStyle","fillRect","fillText","JSON","stringify","Board","grid","squareMatrix","toAdd","added","floor","random","get","set","val","cb","forEach","row","cell","forEachCell","toLeft","transpose","map","reverse","fromLeft","call","leftTilt","filter","length","slice","nextCell","splice","push","updated","Util","arr","el","matrix"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap fdf60bfb354c06d23e8f\n **/","import Game from './game.js';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n\tconst canvas = document.getElementsByTagName('canvas')[0];\n\tconst ctx = canvas.getContext('2d');\n\n\tconst game = new Game(ctx);\n\tgame.start();\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/index.js\n **/","import Board from './board.js';\n\nclass Game{\n\tconstructor(ctx){\n\t\tthis.ctx = ctx;\n\n\t\tthis.base = 2;\n\t\tthis.size = 6;\n\t\tthis.minDim = 100;\n\t\tthis.maxDim = 500;\n\t\tthis.highProb = .9;\n\n\t\tthis.board = new Board({size: this.size, highProb: this.highProb});\n\n\t\tthis.dim = Math.min(this.maxDim, this.size * this.minDim);\n\t\tthis.cellDim = this.dim / this.size;\n\t}\n\n\tstart(){\n\t\tthis.draw();\n\t\tthis.installHandlers();\n\t}\n\n\tdraw(){\n\t\tdocument.getElementsByClassName('grid')[0].style.width = this.dim + 'px';\n\t\tdocument.getElementsByClassName('grid')[0].style.height = this.dim + 'px';\n\t\tdocument.getElementsByTagName('canvas')[0].height = this.dim;\n\t\tdocument.getElementsByTagName('canvas')[0].width = this.dim;\n\n\t\tconst gridCellBorder = 6; //styling\n\n\t\tconst gridCellDim = this.cellDim - 2 * gridCellBorder + 'px';\n\t\tfor (let i = 0; i < Math.pow(this.size, 2); i++){\n\t\t\tconst div = document.createElement('div');\n\t\t\tdiv.style.width = gridCellDim;\n\t\t\tdiv.style.height = gridCellDim;\n\t\t\tdocument.getElementsByClassName('grid')[0].appendChild(div);\n\t\t}\n\n\t\tthis.drawBoard();\n\t}\n\n\tdrawBoard(){\n\t\tthis.ctx.clearRect(0, 0, this.dim, this.dim);\n\t\tthis.board.draw(this.ctx, this.cellDim, this.base);\n\t}\n\n\tinstallHandlers(){\n\t\tconst game = this;\n\t\tdocument.addEventListener('keydown', e => {\n\t\t\tswitch(e.key){\n\t\t\t\tcase 'ArrowUp':\n\t\t\t\tcase 'w':\n\t\t\t\tcase 'j':\n\t\t\t\t\tgame.tilt(0, -1);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'ArrowDown':\n\t\t\t\tcase 's':\n\t\t\t\tcase 'k':\n\t\t\t\t\tgame.tilt(0, 1);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'ArrowLeft':\n\t\t\t\tcase 'a':\n\t\t\t\tcase 'h':\n\t\t\t\t\tgame.tilt(-1, 0);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'ArrowRight':\n\t\t\t\tcase 'd':\n\t\t\t\tcase 'l':\n\t\t\t\t\tgame.tilt(1, 0);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t});\n\t}\n\n\ttilt(i, j){\n\t\tthis.board.tilt(i, j);\n\t\tif (this.board.updatePositions()){\n\t\t\tthis.board.addRandom();\n\t\t\tthis.drawBoard();\n\t\t}\n\t}\n}\n\nexport default Game;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/game.js\n **/","const COLORS = {\n\t1: 'red',\n\t2: 'orange',\n\t3: 'green',\n\t4: 'blue',\n\t5: 'purple',\n\t6: 'red',\n\t7: 'orange',\n\t8: 'green',\n\t9: 'blue',\n\t10: 'purple'\n}; //styling\n\nclass Cell{\n\tconstructor(n, i, j){\n\t\tthis.n = n;\n\t\tthis.i = i;\n\t\tthis.j = j;\n\n\t\tthis.prevI = null;\n\t\tthis.prevJ = null;\n\t\tthis.merged = false;\n\t}\n\n\tdraw(ctx, cellDim, base){\n\t\tif (this.n === undefined){\n\t\t\treturn;\n\t\t}\n\n\t\tctx.font = '24pt sans-serif'; //styling\n\t\tctx.textAlign = 'center';\n\t\tctx.textBaseline = 'middle';\n\n\t\tconst [x, y] = [this.j * cellDim, this.i * cellDim];\n\n\t\tctx.fillStyle = COLORS[this.n];\n\t\tctx.fillRect(x, y, cellDim, cellDim);\n\n\t\tctx.fillStyle = 'white'; //styling\n\t\tctx.fillText(JSON.stringify(Math.pow(base, this.n)), x + cellDim / 2, y + cellDim / 2);\n\t}\n}\n\nexport default Cell;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/cell.js\n **/","import Cell from './cell.js';\nimport Util from './util.js';\n\nclass Board{\n  constructor({size, highProb}){\n\t\tthis.size = size;\n\t\tthis.highProb = highProb;\n\n\t\tthis.grid = Util.squareMatrix(size, new Cell(-1));\n\t\tthis.addRandom(2);\n  }\n\n\taddRandom(toAdd = 1){\n\t\tlet added = 0;\n\t\twhile(added < toAdd){\n\t\t\tconst [i, j] = [Math.floor(Math.random() * this.size),\n\t\t\t\tMath.floor(Math.random() * this.size)];\n\n\t\t\tif (this.get(i, j).n === -1){\n\t\t\t\tconst n = Math.random() < this.highProb ? 1 : 2;\n\t\t\t\tthis.set(i, j, new Cell(n, i, j));\n\n\t\t\t\tadded += 1;\n\t\t\t}\n\t\t}\n\t}\n\n\tget(i, j){\n\t\treturn this.grid[i][j];\n\t}\n\n\tset(i, j, val){\n\t\tthis.grid[i][j] = val;\n\t}\n\n\tforEachCell(cb){\n\t\tthis.grid.forEach((row, i) => {\n\t\t\trow.forEach((cell, j) => {\n\t\t\t\tcb(cell, i, j);\n\t\t\t});\n\t\t});\n\t}\n\n\tdraw(ctx, cellDim, base){\n\t\tthis.forEachCell(cell => {\n\t\t\tcell.draw(ctx, cellDim, base);\n\t\t});\n\t}\n\n\ttilt(i, j){\n\t\tfunction toLeft(){\n\t\t\tif(j !== 0){\n\t\t\t\tthis.grid = Util.transpose(this.grid);\n\t\t\t}\n\t\t\tif(i + j > 0){\n\t\t\t\tthis.grid = this.grid.map(row => row.reverse());\n\t\t\t}\n\t\t}\n\n\t\tfunction fromLeft(){\n\t\t\tif(i + j > 0){\n\t\t\t\tthis.grid = this.grid.map(row => row.reverse());\n\t\t\t}\n\t\t\tif(j !== 0){\n\t\t\t\tthis.grid = Util.transpose(this.grid);\n\t\t\t}\n\t\t}\n\n\t\ttoLeft.call(this);\n\t\tthis.leftTilt();\n\t\tfromLeft.call(this);\n\t}\n\n\tleftTilt(){\n\t\tthis.grid = this.grid.map(row => {\n\t\t\t//remove spaces\n\t\t\trow = row.filter(cell => cell.n !== -1);\n\n\t\t\t//merge\n\t\t\tlet j = 0;\n\t\t\twhile(j < row.length - 1){\n\t\t\t\tlet [cell, nextCell] = row.slice(j, j + 2);\n\n\t\t\t\tif(cell.n === nextCell.n){\n\t\t\t\t\tcell.n += 1;\n\t\t\t\t\tcell.merged = true;\n\t\t\t\t\trow.splice(j + 1, 1);\n\t\t\t\t}\n\n\t\t\t\tj += 1;\n\t\t\t}\n\n\t\t\t//add back spaces\n\t\t\twhile(row.length < this.size){\n\t\t\t\trow.push(new Cell(-1));\n\t\t\t}\n\n\t\t\treturn row;\n\t\t});\n\t}\n\n\tupdatePositions(){\n\t\tlet updated = false;\n\n\t\tthis.forEachCell((cell, i, j) => {\n\t\t\tif (cell.n !== -1){\n\t\t\t\tif(cell.merged){\n\t\t\t\t\tcell.merged = false;\n\t\t\t\t\tupdated = true;\n\t\t\t\t}\n\t\t\t\tif(cell.i !== i || cell.j !== j){\n\t\t\t\t\tupdated = true;\n\t\t\t\t}\n\t\t\t\tcell.i = i;\n\t\t\t\tcell.j = j;\n\t\t\t}\n\t\t});\n\n\t\treturn updated;\n\t}\n\n\n}\n\nexport default Board;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/board.js\n **/","const Util = {\n\ttranspose(arr){\n\t\treturn arr.map((row, i) => (\n\t\t\trow.map((el, j) => (\n\t\t\t\tarr[j][i]\n\t\t\t))\n\t\t));\n\t},\n\n\tsquareMatrix(n, el){\n\t\tconst matrix = [];\n\t\tfor(let i = 0; i < n; i++){\n\t\t\tconst row = [];\n\t\t\tfor (let j = 0; j < n; j++){\n\t\t\t\trow.push(el);\n\t\t\t}\n\t\t\tmatrix.push(row);\n\t\t}\n\t\treturn matrix;\n\t}\n};\n\nexport default Util;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/util.js\n **/"],"sourceRoot":""}